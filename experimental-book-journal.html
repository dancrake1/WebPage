<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Photography Journal</title>

  <!-- Font Imports -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Times+New+Roman:wght@400&family=Arial:wght@900&family=Courier+Prime:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      /* archival, monospaced tone */
      font-family: 'Courier Prime', monospace;
      background: #eae7dc;
      color: #1a1a1a;
      overflow-x: hidden;
      line-height: 1.7;
      position: relative;
    }

    /* Global paper texture overlay (archival feel) */
    body::after {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background-image:
        url('https://www.transparenttextures.com/patterns/paper.png'),
        url('https://www.transparenttextures.com/patterns/paper-fibers.png'),
        url('https://www.transparenttextures.com/patterns/noise-pattern-with-subtle-cross-lines.png');
      background-repeat: repeat;
      opacity: 0.35;                 /* strong but not overpowering */
      mix-blend-mode: multiply;
      filter: contrast(1.06) brightness(0.97);
    }
        
    /* Index Section */
    .index-section {
        min-height: 100vh;
        background: #eae7dc;
        padding: 5rem;
        display: flex;
        align-items: center;
        position: relative;
        z-index: 10;
    }
    
    .hero-image {
        position: absolute;
        top: 22%;
        right: 6%;
        width: 500px;
        height: 600px;
        background: url('images/IMG_6354.JPG') center/cover;
        border-radius: 6px;
        filter: blur(10px) grayscale(60%);
        opacity: 0.5;
        z-index: 1;
        transition: opacity 0.3s ease;
    }
    
    .index-container {
        max-width: 800px;
        width: 100%;
    }
    
    .site-header {
        font-size: 1.1rem;
        font-weight: 400;
        margin-bottom: 3rem;
        letter-spacing: 0.01em;
        color: #2a2a2a;
    }
    
    .index-list {
        list-style: none;
        font-size: 1.3rem;
        line-height: 1.5;
        letter-spacing: 0.02em;
        color: #1a1a1a;
    }
    
    .index-list li {
        margin-bottom: 0.8rem;
        cursor: pointer;
        transition: opacity 0.2s;
    }
    
    .index-list li a {
        text-decoration: none;
        color: inherit;
    }
    
    .index-list li:hover {
        opacity: 0.6;
    }
    
    /* Journal Book Layout */
    .journal-wrapper {
        background: #eae7dc;
        position: relative;
        padding: 4rem 0;
    }
    
    .journal-content {
        max-width: 1600px;         /* as before */
        margin: 0 10mm;            /* as before, not full width */
        background: #fdfbf5;
        position: relative;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        overflow: hidden;
        z-index: 1;
    }
    
    /* Book Spread Container */
    .book-spread {
        position: relative;
        width: 100%;
        height: 100vh;
        min-height: 1400px;
        display: flex;
        background: #fdfbf5;
        overflow: hidden;
    }
    
    /* Page paper texture overlay (on each spread) */
    .book-spread::after {
        content: '';
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 1;
        opacity: 0.22;
        background-image: 
          repeating-linear-gradient(90deg, transparent, transparent 100px, rgba(0,0,0,.03) 100px, rgba(0,0,0,.03) 200px),
          repeating-linear-gradient(0deg,  transparent, transparent 100px, rgba(0,0,0,.03) 100px, rgba(0,0,0,.03) 200px),
          url('https://www.transparenttextures.com/patterns/paper.png'),
          url('https://www.transparenttextures.com/patterns/paper-fibers.png');
        mix-blend-mode: multiply;
    }
    
    /* Center Spine (as before) */
    .center-spine {
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 4px;
        transform: translateX(-50%);
        z-index: 100;
        background: linear-gradient(to right,
            rgba(0,0,0,0.08) 0%,
            rgba(0,0,0,0.05) 20%,
            rgba(0,0,0,0.03) 50%,
            rgba(0,0,0,0.05) 80%,
            rgba(0,0,0,0.08) 100%);
        box-shadow: 
            -1px 0 2px rgba(0,0,0,0.1),
            1px 0 2px rgba(0,0,0,0.1),
            inset 0 0 1px rgba(0,0,0,0.05);
    }
    
    /* Spine binding detail */
    .center-spine::before {
        content: '';
        position: absolute;
        left: 50%;
        top: 5%;
        bottom: 5%;
        width: 1px;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.03);
    }
    
    /* Left and Right Pages with curvature (as before) */
    .page-left,
    .page-right {
        width: 50%;
        height: 100%;
        position: relative;
        padding: 60px;
        overflow: hidden;
        transform-style: preserve-3d;
        z-index: 2; /* above spread texture */
    }
    
    .page-left {
        transform: perspective(3000px) rotateY(0.5deg);
        transform-origin: right center;
        padding-right: 64px;
    }
    
    .page-right {
        transform: perspective(3000px) rotateY(-0.5deg);
        transform-origin: left center;
        padding-left: 64px;
    }
    
    /* Page shadows for spine */
    .page-left::before {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 20px;
        background: linear-gradient(to left, 
            rgba(0,0,0,0.08) 0%, 
            rgba(0,0,0,0.04) 50%,
            transparent 100%);
        z-index: 50;
    }
    
    .page-right::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 20px;
        background: linear-gradient(to right, 
            rgba(0,0,0,0.08) 0%, 
            rgba(0,0,0,0.04) 50%,
            transparent 100%);
        z-index: 50;
    }
    
    .book-element {
        position: absolute;
        z-index: 10;
    }
    
    /* Dummy text blocks — monospaced, ragged */
    .lorem-block {
        font-size: 13px;
        line-height: 1.75;
        color: #2a2a2a;
        text-align: left;
        column-count: 2;
        column-gap: 20px;
        opacity: 0.9;
        font-family: 'Courier Prime', monospace;
    }
    .lorem-block.single-column { column-count: 1; }
    
    /* Titles/labels in mono to match inspiration */
    .bold-interruption,
    .entry-title,
    .book-notes,
    .section-number,
    .metadata-stamp,
    .attribution {
        font-family: 'Courier Prime', monospace;
        letter-spacing: 0.01em;
    }

    .bold-interruption {
        font-size: 3.5rem;
        font-weight: 400;
        line-height: 0.95;
        color: #1a1a1a;
        z-index: 70;
    }
    
    .section-number { font-size: 1rem; opacity: 0.6; color: #2a2a2a; }
    .entry-title { font-size: 1.5rem; font-weight: 600; color: #2a2a2a; }
    .book-notes { font-size: 1.1rem; line-height: 1.3; opacity: 0.85; font-style: normal; }
    .metadata-stamp { font-size: 1.05rem; color: #1a1a1a; }
    .attribution { font-size: 0.85rem; color: #2a2a2a; opacity: 0.7; }
    
    .black-block { background: rgba(0,0,0,0.05); }
    
    /* Positioning guide (unchanged) */
    .positioning-guide {
        position: absolute;
        top: 10px;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(to right,
            rgba(255,0,0,0.3) 0%,
            rgba(255,0,0,0.3) 40%,
            rgba(255,255,0,0.3) 42%,
            rgba(0,255,0,0.3) 48%,
            rgba(0,255,0,0.8) 50%,
            rgba(0,255,0,0.3) 52%,
            rgba(255,255,0,0.3) 58%,
            rgba(255,0,0,0.3) 60%,
            rgba(255,0,0,0.3) 100%
        );
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s;
    }
    .book-spread:hover .positioning-guide { opacity: 1; }
    
    /* Images — RESTORED (no grey), subtle hover brighten */
    .book-image {
        overflow: hidden;
        filter: none; /* key change: no permanent grayscale */
        transition: filter 0.3s, transform 0.3s ease-out;
        background: #fff;
        cursor: zoom-in;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        position: relative;
    }
    .book-image:hover { filter: brightness(1.05) contrast(1.03); }
    .book-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    .book-image.spine-adjacent { box-shadow: 0 4px 15px rgba(0,0,0,0.12); }
    .book-image.spine-spanning { box-shadow: 0 6px 20px rgba(0,0,0,0.18); }
    
    /* Lightbox */
    .lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(251, 248, 243, 0.95);
        z-index: 1000;
        padding: 2rem;
        cursor: zoom-out;
        opacity: 0;
        transition: opacity 0.4s ease-out;
    }
    .lightbox.active {
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 1;
    }
    .lightbox-content {
        width: 95vw;
        height: 95vh;
        position: relative;
        transform: scale(0.8);
        transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .lightbox.active .lightbox-content { transform: scale(1); }
    .lightbox-content img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }
    .lightbox-close {
        position: absolute;
        top: 20px;
        right: 40px;
        color: #1a1a1a;
        font-size: 40px;
        font-weight: 300;
        cursor: pointer;
        z-index: 1001;
        transition: opacity 0.2s;
    }
    .lightbox-close:hover { opacity: 0.7; }
    
    /* Mobile adjustments (unchanged) */
    @media (max-width: 768px) {
        .hero-image {
            width: 200px;
            height: 300px;
            right: 5%;
            top: 15%;
            opacity: 0.2;
        }
        .index-list { font-size: 1.1rem; }
        .book-spread { flex-direction: column; height: auto; }
        .page-left, .page-right {
            width: 100%;
            padding: 30px;
            min-height: 100vh;
            transform: none;
        }
        .center-spine { display: none; }
    }
  </style>
</head>
<body>
    <!-- Index Section -->
    <section class="index-section">
        <div class="hero-image"></div>
        <div class="index-container">
            <h1 class="site-header">places, faces and databases...fotos</h1>
            <ul class="index-list">
                <li><a href="#spread-1">01 - a sunny day at the beach</a></li>
                <li><a href="#spread-2">02 - india adjacent</a></li>
                <li><a href="#spread-3">03 - a great british strawberry</a></li>
                <li><a href="#spread-4">04</a></li>
                <li><a href="#spread-5">05</a></li>
            </ul>
        </div>
    </section>
    
    <!-- Journal Book Wrapper -->
    <div class="journal-wrapper">
        <div class="journal-content">

            <!-- Book Spread 1 -->
            <div class="book-spread" id="spread-1">
                <div class="center-spine"></div>
                
                <!-- Lorem ipsum background text -->
                <div class="lorem-block book-element" style="top: 80px; left: 60px; width: 35%; opacity: 0.4;">
                    Proin facilisis sapien et libero dapibus interdum. In mollis lorem eu diam malesuada, ut tempus ante convallis. Sed egestas facilisis quam, sit amet pellentesque ante dictum fermentum. Pellentesque non malesuada quam.
                </div>
                
                <span class="section-number book-element" style="top: 20px; left: 40px;">01</span>
                
                <!-- EXACT IMAGE POSITIONS (unchanged) -->
                <div class="book-image book-element" style="position: absolute; top: 0%; left: 0%; width: 50%; height: 100%;" data-img="images/severn_sisters/hills.jpg">
                    <img src="images/severn_sisters/hills.jpg" alt="Hills landscape">
                </div>
                
                <p class="book-notes book-element" style="position: absolute; bottom: 120px; left: 40px;">
                    fortunately not tottenham...<br>
                </p>
                
                <p class="book-notes book-element" style="position: absolute; top: 600px; right: 160px;">
                    a pathetic falacy<br>
                </p>

                <div class="book-image book-element" style="position: absolute; top: 20%; left: 50%; width: 16%; height: 28%;" data-img="images/severn_sisters/horse.jpg">
                    <img src="images/severn_sisters/horse.jpg" alt="Portrait 1">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 20%; left: 66.5%; width: 16%; height: 28%;" data-img="images/severn_sisters/beems.jpg">
                    <img src="images/severn_sisters/beems.jpg" alt="Portrait 2">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 20%; left: 83%; width: 16.3%; height: 28%;" data-img="images/severn_sisters/van.jpg">
                    <img src="images/severn_sisters/van.jpg" alt="Portrait 3">
                </div>

                <div class="book-image book-element" style="position: absolute; top: 60%; left: 50%; width: 40%; height: 30%;" data-img="images/severn_sisters/boat.jpg">
                    <img src="images/severn_sisters/boat.jpg" alt="Boat detail">
                </div>
                
                <p class="book-notes book-element" style="position: absolute; bottom: 175px; right: 190px;">
                    the boats!!!<br>
                </p>
                
                <!-- Bold title overlay -->
                <h2 class="bold-interruption book-element" style="top: 35%; right: 25%; font-size: 2.5rem; opacity: 0.9;">
                    She'll Be<br>Waiting
                </h2>
            </div>
            
            <!-- Book Spread 2 -->
            <div class="book-spread" id="spread-2" style="min-height: 3465px;">
                <div class="center-spine"></div>
                
                <!-- Lorem ipsum columns -->
                <div class="lorem-block book-element" style="top: 100px; left: 60px; width: 38%; height: 400px; opacity: 0.3;">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel mauris vitae lectus tincidunt fermentum. Duis cursus tortor sed dolor vehicula, a lobortis nisl cursus. Nulla facilisi. Sed egestas facilisis quam, sit amet pellentesque ante dictum fermentum.
                </div>
                
                <span class="section-number book-element" style="top: 40px; left: 60px;">02</span>
                <span class="attribution book-element" style="top: 65px; left: 60px;">Dora Lazarevic ©2019</span>
                
                <!-- EXACT IMAGE POSITIONS -->
                <div class="book-image book-element" style="position: absolute; top: 0%; left: 50%; width: 50%; height: 20%;" data-img="images/srilanka/train_bleak.jpg">
                    <img src="images/srilanka/train_bleak.jpg" alt="Bleak Train">
                </div>

                <div class="book-image book-element" style="position: absolute; top: 14%; left: 0%; width: 50%; height: 25%;" data-img="images/srilanka/tree_light.jpg">
                    <img src="images/srilanka/tree_light.jpg" alt="Tree Light">
                </div>
                
                <p class="book-notes book-element" style="position: absolute; top: 564px; left: 450px;">
                    500 rupee tuk<br>
                </p>
                
                <div class="book-image book-element" style="position: absolute; top: 24%; left: 50%; width: 25%; height: 15%;" data-img="images/srilanka/fruit.JPG">
                    <img src="images/srilanka/fruit.JPG" alt="Fruit">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 41%; left: 40%; width: 45%; height: 25%;" data-img="images/srilanka/train_blur.JPG">
                    <img src="images/srilanka/train_blur.JPG" alt="Train Blur">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 43%; left: 8%; width: 22%; height: 12%;" data-img="images/srilanka/woman.JPG">
                    <img src="images/srilanka/woman.JPG" alt="Woman">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 68%; left: 0%; width: 50%; height: 25%;" data-img="images/srilanka/beach.jpg">
                    <img src="images/srilanka/beach.jpg" alt="Beach">
                </div>

                <div class="book-image book-element" style="position: absolute; top: 68%; right: 30%; width: 22%; height: 12%;" data-img="images/srilanka/boat_shadow.JPG">
                    <img src="images/srilanka/boat_shadow.JPG" alt="Surfboard">
                </div>
                
                <!-- Bold interruption -->
                <h2 class="bold-interruption book-element" style="bottom: 35%; right: 15%;">
                    India<br>Adjacent
                </h2>
                
                <!-- Metadata timestamp -->
                <div class="metadata-stamp book-element" style="bottom: 25%; right: 15%;">
                    Sri Lanka<br>
                    12/16/19<br>
                    3:14 PM
                </div>
            </div>
            
            <!-- Book Spread 3 -->
            <div class="book-spread" id="spread-3">
                <div class="center-spine"></div>
                
                <span class="section-number book-element" style="top: 40px; left: 40px;">03</span>
                
                <!-- Lorem background -->
                <div class="lorem-block book-element single-column" style="top: 100px; right: 80px; width: 35%; opacity: 0.3;">
                    Cras cursus hendrerit tellus, vel laoreet eros luctus aliquam. Donec erat libero, sagittis non libero et, posuere dictum dolor.
                </div>
                
                <!-- EXACT IMAGE POSITIONS -->
                <div class="book-image book-element" style="position: absolute; top: 20%; left: 5%; width: 40%; height: 60%;" data-img="images/severn_sisters/hills.jpg">
                    <img src="images/severn_sisters/hills.jpg" alt="Large landscape">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 25%; right: 10%; width: 30%; height: 45%;" data-img="images/severn_sisters/boat.jpg">
                    <img src="images/severn_sisters/boat.jpg" alt="Boat composition">
                </div>
                
                <p class="book-notes book-element" style="position: absolute; bottom: 15%; left: 20%;">
                    composition<br>
                    and framing<br>
                    studies
                </p>
                
                <!-- Bold title -->
                <h2 class="bold-interruption book-element" style="top: 40%; right: 15%; font-size: 2rem;">
                    A Great British<br>Strawberry
                </h2>
            </div>
            
            <!-- Book Spread 4 -->
            <div class="book-spread" id="spread-4">
                <div class="center-spine"></div>
                
                <span class="section-number book-element" style="top: 40px; left: 40px;">MDC 2021</span>
                
                <!-- Lorem text filling -->
                <div class="lorem-block book-element" style="top: 100px; left: 60px; width: 35%; height: 400px; opacity: 0.4;">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent euismod, nisl eget ultricies tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.
                </div>
                
                <!-- EXACT IMAGE POSITIONS -->
                <div class="black-block book-element" style="position: absolute; top: 20%; left: 0; width: 40%; height: 35%;"></div>
                
                <div class="book-image book-element" style="position: absolute; top: 30%; left: 46%; width: 8%; height: 45%;" data-img="images/severn_sisters/hills.jpg">
                    <img src="images/severn_sisters/hills.jpg" alt="Cross spine test">
                </div>
                
                <div class="book-image book-element" style="position: absolute; bottom: 25%; right: 15%; width: 20%; height: 25%;" data-img="images/severn_sisters/boat.jpg">
                    <img src="images/severn_sisters/boat.jpg" alt="Right side detail">
                </div>
                
                <p class="book-notes book-element" style="position: absolute; bottom: 15%; right: 10%; text-align: right;">
                    mixed<br>
                    compositions
                </p>
                
                <div class="metadata-stamp book-element" style="bottom: 80px; left: 60px;">
                    personal trip on film.
                </div>
            </div>
            
            <!-- Book Spread 5 -->
            <div class="book-spread" id="spread-5">
                <div class="center-spine"></div>
                
                <span class="section-number book-element" style="top: 40px; left: 40px;">05</span>
                
                <!-- Background lorem -->
                <div class="lorem-block book-element" style="top: 80px; left: 50%; transform: translateX(-50%); width: 70%; text-align: center; opacity: 0.2;">
                    Aliquam consequat sagittis lorem, vel eleifend risus gravida in. Aenean bibendum aliquam orci quis interdum.
                </div>
                
                <!-- EXACT IMAGE POSITIONS -->
                <div class="book-image book-element" style="position: absolute; top: 10%; left: 5%; width: 42%; height: 70%;" data-img="images/severn_sisters/hills.jpg">
                    <img src="images/severn_sisters/hills.jpg" alt="Final landscape">
                </div>
                
                <div class="book-image book-element" style="position: absolute; top: 60%; right: 15%; width: 25%; height: 25%;" data-img="images/severn_sisters/boat.jpg">
                    <img src="images/severn_sisters/boat.jpg" alt="Final detail">
                </div>
                
                <h2 class="entry-title book-element" style="position: absolute; bottom: 15%; right: 20%; text-align: center;">
                    Final Portfolio
                </h2>
                
                <!-- Bottom metadata -->
                <div class="metadata-stamp book-element" style="bottom: 60px; left: 50%; transform: translateX(-50%);">
                    Europe<br>
                    09/03/25<br>
                    London, GB
                </div>
            </div>

        </div>
    </div>
    
    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <span class="lightbox-close">&times;</span>
        <div class="lightbox-content">
            <img src="" alt="Full view">
        </div>
    </div>
    
    <script>
        // FIXED: Automatic spine blending - Ultra-tight detection
        function applySpineBlending() {
            document.querySelectorAll('.book-spread').forEach(spread => {
                // Check all images in this spread
                spread.querySelectorAll('.book-image').forEach(image => {
                    // Get the left position as percentage
                    const leftStyle = image.style.left || '0%';
                    const leftPercent = parseFloat(leftStyle.replace('%', ''));
                    
                    // Get the width as percentage
                    const widthStyle = image.style.width || '20%';
                    const widthPercent = parseFloat(widthStyle.replace('%', ''));
                    
                    const rightPercent = leftPercent + widthPercent;
                    
                    // FIXED: Define spine zone - extremely tight: 48-52% (only 4% around center)
                    const spineZoneLeft = 48;
                    const spineZoneRight = 52;
                    
                    // Remove any existing spine effects first
                    image.classList.remove('spine-adjacent', 'spine-spanning');
                    image.style.transform = '';
                    image.style.transformOrigin = '';
                    image.querySelectorAll('.spine-shadow').forEach(shadow => shadow.remove());
                    
                    // Check if image intersects with spine zone
                    if (rightPercent > spineZoneLeft && leftPercent < spineZoneRight) {
                        // Apply spine blending effect
                        image.classList.add('spine-adjacent');
                        
                        // Check if image spans across the exact center (50%)
                        if (leftPercent < 50 && rightPercent > 50) {
                            // Image crosses the spine
                            image.classList.add('spine-spanning');
                            image.style.transform = 'perspective(2000px) rotateX(0.5deg)';
                            
                            // Add center shadow overlay
                            const centerShadow = document.createElement('div');
                            centerShadow.className = 'spine-shadow spine-shadow-center';
                            centerShadow.style.cssText = `
                                position: absolute;
                                left: 45%;
                                right: 45%;
                                top: 0;
                                bottom: 0;
                                background: linear-gradient(to right,
                                    transparent 0%,
                                    rgba(0,0,0,0.3) 30%,
                                    rgba(0,0,0,0.5) 50%,
                                    rgba(0,0,0,0.3) 70%,
                                    transparent 100%);
                                pointer-events: none;
                                z-index: 5;
                            `;
                            image.appendChild(centerShadow);
                        } else {
                            // Determine which side of spine the image is primarily on
                            const imageCenter = leftPercent + (widthPercent / 2);
                            
                            if (imageCenter < 50) {
                                // Left side of spine
                                image.style.transformOrigin = 'right center';
                                image.style.transform = 'perspective(2000px) rotateY(1.5deg)';
                                
                                // Add shadow on right edge (toward spine)
                                const shadow = document.createElement('div');
                                shadow.className = 'spine-shadow spine-shadow-right';
                                shadow.style.cssText = `
                                    position: absolute;
                                    right: 0;
                                    top: 0;
                                    bottom: 0;
                                    width: 20px;
                                    background: linear-gradient(to left,
                                        rgba(0,0,0,0.4) 0%,
                                        rgba(0,0,0,0.2) 50%,
                                        transparent 100%);
                                    pointer-events: none;
                                    z-index: 5;
                                `;
                                image.appendChild(shadow);
                            } else {
                                // Right side of spine
                                image.style.transformOrigin = 'left center';
                                image.style.transform = 'perspective(2000px) rotateY(-1.5deg)';
                                
                                // Add shadow on left edge (toward spine)
                                const shadow = document.createElement('div');
                                shadow.className = 'spine-shadow spine-shadow-left';
                                shadow.style.cssText = `
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    bottom: 0;
                                    width: 20px;
                                    background: linear-gradient(to right,
                                        rgba(0,0,0,0.4) 0%,
                                        rgba(0,0,0,0.2) 50%,
                                        transparent 100%);
                                    pointer-events: none;
                                    z-index: 5;
                                `;
                                image.appendChild(shadow);
                            }
                        }
                    }
                });
            });
        }
        
        // Apply spine blending on load and resize
        document.addEventListener('DOMContentLoaded', applySpineBlending);
        window.addEventListener('resize', applySpineBlending);
        
        // Smooth scroll behavior for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Lightbox functionality with smooth transitions
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = lightbox.querySelector('img');
        
        // Add click handlers to all images
        document.querySelectorAll('.book-image').forEach(image => {
            image.addEventListener('click', function() {
                const imgSrc = this.getAttribute('data-img') || this.querySelector('img').src;
                lightboxImg.src = imgSrc;
                
                // Show lightbox with smooth transition
                lightbox.style.display = 'flex';
                
                // Force reflow then add active class for smooth transition
                requestAnimationFrame(() => {
                    lightbox.classList.add('active');
                });
            });
        });
        
        // Close lightbox with smooth transition
        lightbox.addEventListener('click', function() {
            this.classList.remove('active');
            
            // Hide after transition completes
            setTimeout(() => {
                if (!this.classList.contains('active')) {
                    this.style.display = 'none';
                }
            }, 400);
        });
        
        // Subtle parallax effect - very minimal movement
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const spreads = document.querySelectorAll('.book-spread');
            
            spreads.forEach(spread => {
                const rect = spread.getBoundingClientRect();
                const images = spread.querySelectorAll('.book-image');
                const textElements = spread.querySelectorAll('.book-notes, .section-number, .entry-title');
                
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    // Very subtle parallax for images
                    images.forEach(image => {
                        const speed = 0.01; // Much more subtle movement
                        const yPos = -(scrolled * speed);
                        
                        // Preserve existing transforms from spine blending
                        let existingTransform = '';
                        if (image.classList.contains('spine-adjacent')) {
                            if (image.classList.contains('spine-spanning')) {
                                existingTransform = 'perspective(2000px) rotateX(0.5deg)';
                            } else if (image.style.transform.includes('rotateY(1.5deg)')) {
                                existingTransform = 'perspective(2000px) rotateY(1.5deg)';
                            } else if (image.style.transform.includes('rotateY(-1.5deg)')) {
                                existingTransform = 'perspective(2000px) rotateY(-1.5deg)';
                            }
                        }
                        
                        image.style.transform = `${existingTransform} translateY(${yPos}px)`;
                    });
                    
                    // Even more subtle movement for text elements (barely noticeable)
                    textElements.forEach(text => {
                        const textSpeed = 0.005; // Extremely subtle for text
                        const textYPos = -(scrolled * textSpeed);
                        text.style.transform = `translateY(${textYPos}px)`;
                    });
                }
            });
        });
        
        // Fade in on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('.book-element').forEach(element => {
            element.style.opacity = '0';
            element.style.transition = 'opacity 0.8s ease-out';
            observer.observe(element);
        });
        
        // Re-apply spine blending after fade-in animations
        setTimeout(applySpineBlending, 100);
    </script>
</body>
</html>